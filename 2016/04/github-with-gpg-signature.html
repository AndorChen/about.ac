<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"/><title>为 GitHub 设置 GPG 签名 - Andor Chen</title><meta name="description" content="安道的个人网站"/><meta name="author" content="安道"/><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/><link rel="stylesheet" href="http://cdn.staticfile.org/twitter-bootstrap/3.2.0/css/bootstrap.min.css"/><link rel="stylesheet" href="http://cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.min.css"/><link rel="stylesheet" href="/assets/style.css"/></head><body><div class="wrapper"><div class="inner"><header class="site-header clearfix"><div class="avatar"><a href="/" title="首页"><img src="/assets/images/panda.jpg" width="180" height="180" alt="" title=""/></a></div><h1 class="logo"><a href="/" title="首页">安道</a></h1></header><div class="breadcrumbs"><a href="/" title="首页">首页</a> // <a href="/archive/" title="文章归档">文章归档</a></div><article class="hentry entry post"><header class="entry-header"><h1 class="entry-title">为 GitHub 设置 GPG 签名</h1><p class="entry-meta">发布于2016年4月16日</p></header><div class="entry-content"><p>GitHub 前几天支持 GPG 签名验证提交了（<a href="https://github.com/blog/2144-gpg-signature-verification" title="GPG signature verification">via</a>），今天对我的 GitHub 账户做了相应的设置，本文记录过程备考。</p><h3>第 1 步：安装 GPG 命令行工具</h3><p>使用 Homebrew 安装 GPG 命令行工具 gnupg：</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>brew install gpg
</code></pre></div><h3>第 2 步：生成 GPG 密钥</h3><p>执行下述命令生成 GPG 密钥：</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>gpg --gen-key
</code></pre></div><p>在生成的过程中：</p><ul><li>询问密钥种类时按回车键，选择默认类型（RSA and RSA）；</li><li>询问密钥大小时，输入“4096”；</li><li>询问密钥有效期时按回车键，使用默认值，即永不过期；</li><li>输入“y”确认上述设置；</li><li>输入真实姓名和电子邮件地址，“Comment”可留空；</li><li>输入“O”确认；</li><li>输入保护私钥的密码；</li></ul><p>以上信息设置完毕后，等待程序生成密钥。</p><h3>第 3 步：添加 GPG 公钥</h3><p>执行下述命令，查看可用的 GPG 密钥：</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>gpg --list-keys
/Users/userA/.gnupg/pubring.gpg
-------------------------------
pub   4096R/4A667092 2016-04-16
uid                  Your Name &lt;your-name@gmail.com&gt;
sub   4096R/48E027A6 2016-04-16
</code></pre></div><p>其中，<code class="highlighter-rouge">4A667092</code> 是 GPG 密钥的 ID。</p><p>执行下属命令，输出指定的 GPG 公钥：</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>gpg --armor --export &lt;GPG-ID&gt;
</code></pre></div><p>把 <code class="highlighter-rouge">&lt;GPG-ID&gt;</code> 替换成具体的 ID。在输出的内容中，从“—–BEGIN PGP PUBLIC KEY BLOCK—–”复制到“—–END PGP PUBLIC KEY BLOCK—–”。打开 <a href="https://github.com/settings/keys" title="GitHub 设置密钥的网页">GitHub 设置密钥的网页</a>，粘贴 GPG 密钥。</p><h3>第 4 步：设置 Git</h3><p>最后要设置 Git，让 Git 使用指定的 GPG 密钥，并让 Git 在提交时使用 GPG 密钥签名。</p><p>在 <code class="highlighter-rouge">~/.gitconfig</code> 文件中添加下述设置（如果集中管理 dotfiles，则在相应的文件中添加）：</p><div class="highlighter-rouge"><pre class="highlight"><code>[user]
  ...
  signingkey = &lt;GPG-ID&gt;
...
[commit]
  gpgsign = true
</code></pre></div><h3>第 5 步：签名提交</h3><p>按照常规的方式提交，Git 会询问私钥的密码，输入即可。</p><div class="language-sh highlighter-rouge"><pre class="highlight"><code>git commit -m <span class="s1">'&lt;commit message&gt;'</span>

You need a passphrase to unlock the secret key <span class="k">for
</span>user: <span class="s2">"Your Name &lt;your-name@gmail.com&gt;"</span>
4096-bit RSA key, ID 4A667092, created 2016-04-16

...
</code></pre></div></div><ul class="entry-tags"><li><a class="btn btn-default btn-sm" href="/tags/#git-ref" title="Git">Git</a></li></ul></article><ul class="pager"><li class="previous"><a rel="prev" href="/2015/12/2015.html" title="2015 年">&laquo; 上一篇文章</a></li></ul><footer class="site-footer clearfix"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"><div class="bottom-nav"><a href="/about/" title="关于安道">关于安道</a> - <a href="/books/" title="图书归档">图书归档</a> - <a href="/archive/" title="文章归档">文章归档</a> - <a href="mailto:andor.chen.27@gmail.com" title="邮件联系">邮件联系</a></div><ul class="socials"><li><a href="/feed.xml" title="订阅网站更新"><i class="fa fa-rss"></i></a></li><!-- <li><a href="mailto:andor.chen.27@gmail.com" title="电子邮件"><i class="fa fa-envelope-o"></i></a></li> --><li><a href="https://twitter.com/Andor_Chen" title="Twitter" target="_blank"><i class="fa fa-twitter"></i></a></li><li><a href="http://www.weibo.com/andor27/" title="微博" target="_blank"><i class="fa fa-weibo"></i></a></li><li><a href="https://github.com/AndorChen" title="GitHub" target="_blank"><i class="fa fa-github"></i></a></li><li><a class="douban" href="http://www.douban.com/people/Andor/" title="豆瓣" target="_blank">豆</a></li></ul><p class="copyright">&copy; 1988- 2016。如无特殊说明，本站内容基于“<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh" title="CC BY-NC-SA 3.0" target="_blank">CC BY-NC-SA 3.0</a>”发布。</p><p class="powered-by"><a href="http://jekyllrb.com" title="本站使用 Jekyll 生成" target="_blank"><img src="/assets/images/jekyll-logo@2x.png" width="60" height="24" alt="Jekyll Logo" title="本站使用 Jekyll 生成"/></a></p></div></footer></div></div><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69344223-1', 'auto');
  ga('send', 'pageview');</script></body></html>