<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://bridgetownrb.com/" version="1.0.0">Bridgetown</generator><link href="https://about.ac/feed.xml" rel="self" type="application/atom+xml" /><link href="https://about.ac/" rel="alternate" type="text/html" /><updated>2023-01-07T20:22:28+08:00</updated><id>https://about.ac/feed.xml</id><title type="html">Andor Chen</title><subtitle>安道的个人网站</subtitle><author><name>安道</name></author><entry><title type="html">邮票上的物理学史（5-9）</title><link href="https://about.ac/2023/01/physics-stamps-two.html" rel="alternate" type="text/html" title="邮票上的物理学史（5-9）" /><published>2023-01-07T00:00:00+08:00</published><updated>2023-01-07T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2023-01-07-physics-stamps-two.md</id><content type="html" xml:base="https://about.ac/2023/01/physics-stamps-two.html">&lt;p&gt;按：最近在看《&lt;a href=&quot;https://book.douban.com/subject/1391033/&quot;&gt;邮票上的物理学史&lt;/a&gt;》（秦克诚，清华大学出版社），书中有大量邮票，大都有图示，也标注了发行年份和国家。但是，不便检索。遂决定找出每枚邮票的编号。过程中，发现书中给出的个别邮票信息有误，一道订正。&lt;/p&gt;

&lt;p&gt;注：如无特殊说明，邮票编号为 Scott 目录编号。&lt;/p&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;5. 哥白尼的日心说&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图5-1：1953，波兰，PL 578、579，哥白尼诞生480年&lt;/li&gt;
  &lt;li&gt;图5-2：1953，中国，纪25.4-2，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-3：1957，法国，FR 857，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-4：1955，苏联，SU 1752，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-5：1969，波兰，PL 1659~1661，哥白尼诞生500年（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中图题“400周年”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-6：1970，波兰，PL 1745~1747，哥白尼就读的3所意大利大学（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中图题“400周年”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-7：1971，波兰，PL 1818~1821，与哥白尼关系密切的几处地点（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中图题“400周年”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-8：1972，波兰，PL 1915~1918、PL B127，哥白尼诞生500年（第四套）（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中图题“400周年”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-9：1973，波兰，PL 1956~1960，哥白尼诞生500年（第五套）（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中图题“400周年”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-10：1972，波兰，PL 1944、1945，哥白尼普票&lt;/li&gt;
  &lt;li&gt;图5-11：1973，波兰，PL B129，邮票日（哥白尼）&lt;/li&gt;
  &lt;li&gt;图5-12：1923，波兰，PL 192、194，最早的哥白尼邮票（&lt;strong class=&quot;text-dracula-red&quot;&gt;最早？&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-13：1951，波兰，PL 515，波兰科学大会（哥白尼）&lt;/li&gt;
  &lt;li&gt;图5-14：1955，波兰，PL 672，华沙的哥白尼塑像&lt;/li&gt;
  &lt;li&gt;图5-15：1959，波兰，PL 885，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-16：1961，波兰，PL 982，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-17：1964，波兰，PL 1229，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-18：1992，波兰，PL 3079，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-19：1993，波兰，PL 3158，哥白尼逝世450年&lt;/li&gt;
  &lt;li&gt;图5-20：1942，德占波兰，PL NB23，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-21：1943，德占波兰，PL NB27，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-22：1973，西德，DE 1104，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-23：1973，东德，DD 1461，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-24：1973，苏联，SU 4060，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-25：1974，法国，FR 1416，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-26：1973，匈牙利，HU 2218，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-27：1973，罗马尼亚，RO 2405，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-28：1973，保加利亚，BG 2086，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-29：1973，阿尔巴尼亚，AL 1481~1486，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-30：1973，梵蒂冈，VA 537~540，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-31：1973，蒙古，MN 723~725，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-32：1973，越南，VN 691、692，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-33：1973，叙利亚，SY 670，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-34：1973，印度，IN 587，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-35：1973，巴基斯坦，PK 336，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-36：1974，孟加拉，BD 61、62，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-37：1974，马尔代夫，MV 480~487、488，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-38：1974，喀麦隆，CM C220，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-39：1973，中非，CF C116，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-40：1973，刚果，CG C160，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-41：1974，马尔加什（&lt;strong class=&quot;text-dracula-red&quot;&gt;今马达加斯加&lt;/strong&gt;），MG C121，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-42：1973，马里，ML C178，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-43：1973，乍得，TD C154，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-44：1973，科摩罗，KM C56，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-45：1973，尼日尔，NE C221，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-46：1973，达荷美（&lt;strong class=&quot;text-dracula-red&quot;&gt;今贝宁&lt;/strong&gt;），DY C185、C186，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-47：1974，赤道几内亚，GQ 74-01~74-09，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-48：1973，卢旺达，RW 565~571，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-49：1973，布隆迪，BI 434，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-50：1973，利比里亚，LR 653~658、C200，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-51：1973，几内亚，GN 653~658，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-52：1973，美国，US 1488，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-53：1973，墨西哥，MX C416，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-54：1974，哥伦比亚，CO C593，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-55：1973，委内瑞拉，VE 1015a，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-56：1973，乌拉圭，UY 870，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-57：1974，智利，CL B6，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-58：1973，巴西，BR 1301，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-59：1973，古巴，CU 1799~1801、1802，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-60：1974，海地，HT C420、HT 680、681、HT C415~C419，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;图5-61：1969，也门，Michel YE-AR 904，Spoutnik 3和哥白尼&lt;/li&gt;
  &lt;li&gt;图5-62：1973，法属阿法尔和伊萨领地，FR-AI C83，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-63：1975，捷克斯洛伐克，CS 2027，空间研究国际合作（哥白尼）&lt;/li&gt;
  &lt;li&gt;图5-64：1982，圣马力诺，SM 1022，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-65：1979，科摩罗，KM 411，哥白尼和旅行者1号&lt;/li&gt;
  &lt;li&gt;图5-66：1988，科摩罗，KM B4b，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-67：1985，中非，CF 759，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-68：1993，蒙古，Michel MN 2466，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-69：1993，加蓬，GA 772，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-70：1993，马尔代夫，MV 1880、1881、1882，哥白尼逝世450年&lt;/li&gt;
  &lt;li&gt;图5-71：1994，尼加拉瓜，NI 1985a，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-72：1994，尼加拉瓜，Michel NI 3308，哥白尼（&lt;strong class=&quot;text-dracula-red&quot;&gt;小型张内芯编号，Colnect未列出小型张&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-73：1994，巴拉圭，PY 2495，哥白尼&lt;/li&gt;
  &lt;li&gt;图5-74：2000，安哥拉，AO 1150n，1543宇宙新理论&lt;/li&gt;
  &lt;li&gt;图5-75：2000，几内亚，GN 1862g，哥白尼（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“2001”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图5-76：1998，保加利亚，BG 4058，布鲁诺诞生450年&lt;/li&gt;
  &lt;li&gt;图5-77：2000，意大利，IT 2375，布鲁诺逝世400年&lt;/li&gt;
  &lt;li&gt;图5-78：1974，圣皮埃尔岛和密克隆岛，PM C56，哥白尼诞生500年&lt;/li&gt;
  &lt;li&gt;N/A：1965，巴拉圭，PY 876a、Michel PY BL70，爱因斯坦和伽利略&lt;/li&gt;
  &lt;li&gt;图5-79：1965，巴拉圭，PY 871~878，科学家&lt;/li&gt;
  &lt;li&gt;图5-80：1965，巴拉圭，Michel PY 1439~1446，科学家（&lt;strong class=&quot;text-dracula-red&quot;&gt;图5-79的无齿版&lt;/strong&gt;）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;6. 第谷·布拉赫和开普勒&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图6-1：1946，丹麦，DK 300，第谷诞生400年&lt;/li&gt;
  &lt;li&gt;图6-2：1973，丹麦，DK 524，第谷发现新星&lt;/li&gt;
  &lt;li&gt;图6-3：1995，丹麦，DK 1035、1036，天文堡和第谷的仪器&lt;/li&gt;
  &lt;li&gt;图6-4：1995，瑞典，SE 2149、2150，天文堡和第谷的仪器&lt;/li&gt;
  &lt;li&gt;图6-5：1985，尼加拉瓜，NI 1486，第谷的地下观测室&lt;/li&gt;
  &lt;li&gt;图6-6：1996，捷克，CZ 2996，第谷在布拉格&lt;/li&gt;
  &lt;li&gt;图6-7：1971，阿森松，AC 140，第谷天文堡&lt;/li&gt;
  &lt;li&gt;图6-8：1994，尼加拉瓜，NI 1985b，第谷&lt;/li&gt;
  &lt;li&gt;图6-9：1986，柬埔寨，KH 705，太阳系、哥白尼、伽利略和第谷&lt;/li&gt;
  &lt;li&gt;图6-10：1969，也门，Michel YE-AR 913，探险者6号和第谷&lt;/li&gt;
  &lt;li&gt;图6-11：1953，奥地利，AT B282，开普勒&lt;/li&gt;
  &lt;li&gt;图6-12：1990，塞拉利昂，SL 1167a，开普勒第一定律和第二定律&lt;/li&gt;
  &lt;li&gt;图6-13：1991，格林纳达，GD 1999a，开普勒第一定律和第二定律&lt;/li&gt;
  &lt;li&gt;图6-14：1971，东德，DD 1275，开普勒&lt;/li&gt;
  &lt;li&gt;图6-15：1971，西德，DE 1072，开普勒诞生400年&lt;/li&gt;
  &lt;li&gt;图6-16：1971，墨西哥，MX C379，开普勒&lt;/li&gt;
  &lt;li&gt;图6-17：1971，罗马尼亚，RO 2309，天文堡和开普勒&lt;/li&gt;
  &lt;li&gt;图6-18：1983，罗马尼亚，RO 3135a，开普勒&lt;/li&gt;
  &lt;li&gt;图6-19：1971，达荷美，DY C142、C143，开普勒&lt;/li&gt;
  &lt;li&gt;图6-20：1980，贝宁，BJ 501、502，开普勒逝世350年&lt;/li&gt;
  &lt;li&gt;图6-21：1972，富查伊拉，Michel FU 826A~831A，开普勒诞生400年&lt;/li&gt;
  &lt;li&gt;图6-22：1980，马里，ML C388、C389，开普勒逝世350年&lt;/li&gt;
  &lt;li&gt;图6-23：1980，蒙古，MN C145，开普勒逝世350年&lt;/li&gt;
  &lt;li&gt;图6-24：1980，朝鲜，KP 1985、Michel KP BL82A，开普勒逝世350年&lt;/li&gt;
  &lt;li&gt;图6-25：1980，匈牙利，HU 2667，开普勒逝世350年&lt;/li&gt;
  &lt;li&gt;图6-26：1981，布隆迪，Michel BI 1580，开普勒逝世350年&lt;/li&gt;
  &lt;li&gt;图6-27：1969，也门，Michel YE-AR 908，月球2号和开普勒&lt;/li&gt;
  &lt;li&gt;图6-28：1988，科摩罗，KM B4c，开普勒&lt;/li&gt;
  &lt;li&gt;图6-29：1994，几内亚，GN 1262a，开普勒&lt;/li&gt;
  &lt;li&gt;图6-30：1994，巴拉圭，PY 2496，开普勒&lt;/li&gt;
  &lt;li&gt;图6-31：2001，莫桑比克（&lt;strong class=&quot;text-dracula-red&quot;&gt;据查，此枚为非法邮票&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图6-32：2000，塞拉利昂，SL 2254j，开普勒发表新天文学&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;7. 伽利略&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图7-1：1964，意大利，IT 888、889，伽利略诞生400年&lt;/li&gt;
  &lt;li&gt;图7-2：1964，匈牙利，HU 1592，伽利略诞生400年&lt;/li&gt;
  &lt;li&gt;图7-3：1982，圣马力诺，SM 1030，伽利略&lt;/li&gt;
  &lt;li&gt;图7-4：1987，阿尔巴尼亚，AL 2243，伽利略&lt;/li&gt;
  &lt;li&gt;图7-5：1942，意大利，IT 419~422，伽利略生平&lt;/li&gt;
  &lt;li&gt;图7-6：1988，冈比亚，GM 799，纪念《关于两大世界体系的对话》出版350年&lt;/li&gt;
  &lt;li&gt;图7-7：2000，爱尔兰，IE 1219f，伽利略晚年&lt;/li&gt;
  &lt;li&gt;图7-8：1966，厄瓜多尔，EC 750B，伽利略和摆&lt;/li&gt;
  &lt;li&gt;图7-9：1973，意大利，IT 1117，比萨斜塔&lt;/li&gt;
  &lt;li&gt;图7-10：1991，多米尼克，DM 1366（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行国家“多米尼加”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图7-11：1991，中国，JP.29.(1-1)，发现“惯性质量和引力质量等价”400年（&lt;strong class=&quot;text-dracula-red&quot;&gt;明信片&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图7-12：1995，意大利，IT 2048，佛罗伦萨第14届国际相对论大会&lt;/li&gt;
  &lt;li&gt;图7-13：1983，意大利，IT 1558，欧罗巴·科学发现·伽利略&lt;/li&gt;
  &lt;li&gt;图7-14：1964，罗马尼亚，RO 1647，伽利略&lt;/li&gt;
  &lt;li&gt;图7-15：1994，直布罗陀，GI 656，伽利略早期折射望远镜&lt;/li&gt;
  &lt;li&gt;图7-16：2000，几内亚，GN 1862f，伽利略（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“2001”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图7-17：1971，阿森松，AC 141，伽利略&lt;/li&gt;
  &lt;li&gt;图7-18：1999，圣文森特和格林纳丁斯，VC 2696，伽利略（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中未标发行年份，Colnect未列&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图7-19：1964，苏联，SU 2986，伽利略诞生400年&lt;/li&gt;
  &lt;li&gt;图7-20：1964，捷克斯洛伐克，CS 1231，伽利略&lt;/li&gt;
  &lt;li&gt;图7-21：1984，吉布提，DJ C207、C208，伽利略的望远镜375年&lt;/li&gt;
  &lt;li&gt;图7-22：1990，塞拉利昂，SL 1167b，伽利略手绘的月面图&lt;/li&gt;
  &lt;li&gt;图7-23：1991，格林纳达，GD 1999b，伽利略手绘的月面图&lt;/li&gt;
  &lt;li&gt;图7-24：1988，马尔代夫，MV 1271，伽利略置身行星队伍中&lt;/li&gt;
  &lt;li&gt;图7-25：2000，塞拉利昂，SL 2254o，1632年伽利略证明地球绕太阳旋转&lt;/li&gt;
  &lt;li&gt;图7-26：1992，西撒哈拉解放阵线，非法邮票无编号，伽利略逝世350年&lt;/li&gt;
  &lt;li&gt;图7-27：1969，也门王国，Michel YE-K 862A，伽利略&lt;/li&gt;
  &lt;li&gt;图7-28：1970，尼日尔，NE C125，伽利略&lt;/li&gt;
  &lt;li&gt;图7-29：1971，墨西哥，MX C378，伽利略&lt;/li&gt;
  &lt;li&gt;图7-30：1979，科摩罗，KM 409，伽利略和旅行者1号&lt;/li&gt;
  &lt;li&gt;图7-31：1984，中非，CF 657，伽利略和阿丽亚娜运载火箭&lt;/li&gt;
  &lt;li&gt;图7-32：1985，中非，CF 760，伽利略和维京飞行器&lt;/li&gt;
  &lt;li&gt;图7-33：1988，科摩罗，KM B4a，伽利略&lt;/li&gt;
  &lt;li&gt;图7-34：1994，尼加拉瓜，NI 1985c，伽利略&lt;/li&gt;
  &lt;li&gt;图7-35：1933，意大利，IT D16，伽利略（管道邮票）&lt;/li&gt;
  &lt;li&gt;图7-36：1945，意大利，IT D18，伽利略（管道邮票）&lt;/li&gt;
  &lt;li&gt;图7-37：1988，东德，DD 2655，《伽利略传》作者布莱希特&lt;/li&gt;
  &lt;li&gt;图7-38：1994，梵蒂冈，VA 954，伽利略的成就&lt;/li&gt;
  &lt;li&gt;图7-39：1942，比利时，BE B321，荷兰数学家和物理学家斯蒂文&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;文中还提到一些邮票，没有给出图示，下面列出。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1965，巴拿马，有齿：PA C334a 无齿：Michel PA BL37，伽利略诞生400年&lt;/li&gt;
  &lt;li&gt;1969，布隆迪，BI 295，伽利略画像&lt;/li&gt;
  &lt;li&gt;1969，也门，Michel YE-AR 907，月球3号和伽利略&lt;/li&gt;
  &lt;li&gt;1971，阿治曼，Michel AJ 993EB，伽利略&lt;/li&gt;
  &lt;li&gt;1985，尼加拉瓜，NI 1489，伽利略、牛顿等人的望远镜&lt;/li&gt;
  &lt;li&gt;1986，莱索托，LS 526，美国加州帕洛马尔山观象台Hale望远镜和伽利略头像&lt;/li&gt;
  &lt;li&gt;1986，柬埔寨，同图6-9&lt;/li&gt;
  &lt;li&gt;1986，老挝，LA 731，连票，右票为伽利略头像&lt;/li&gt;
  &lt;li&gt;1992，安提瓜和巴布达，AG 1606，发明家伽利略&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;8. 真空和大气压&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图8-1：1958，意大利，IT 754，托里拆利&lt;/li&gt;
  &lt;li&gt;图8-2：1959，苏联，SU 2165，托里拆利诞生350年&lt;/li&gt;
  &lt;li&gt;图8-3：1983，圣马力诺，SM 1043，托里拆利（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“1982”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图8-4：1944，法国，FR B181，帕斯卡&lt;/li&gt;
  &lt;li&gt;图8-5：1962，法国，FR 1038，帕斯卡&lt;/li&gt;
  &lt;li&gt;图8-6：1973，摩纳哥，MC 875，帕斯卡诞生350年&lt;/li&gt;
  &lt;li&gt;图8-7：1936，德意志帝国，DE 472，居里克&lt;/li&gt;
  &lt;li&gt;图8-8：1977，东德，DD 1793，居里克和马德堡半球&lt;/li&gt;
  &lt;li&gt;图8-9：1969，东德，DD 1146、B154，民主德国建国20周年全国邮展，图一：马德堡居里克塑像，图二：马德堡半球实验场面&lt;/li&gt;
  &lt;li&gt;图8-10：2002，德国，DE 2181，居里克诞生400年（马德堡半球实验场面）&lt;/li&gt;
  &lt;li&gt;图8-11：1981，爱尔兰，IE 492，玻意耳和空气泵&lt;/li&gt;
  &lt;li&gt;图8-12：1987，格林纳达，GD 1537，玻意耳&lt;/li&gt;
  &lt;li&gt;图8-13：1962，法国，FR B359，帕潘&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;9. 笛卡尔和惯性原理&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图9-1：1996，法国，FR 2512，笛卡尔&lt;/li&gt;
  &lt;li&gt;图9-2：1996，摩纳哥，MC 2015，笛卡尔诞生400年&lt;/li&gt;
  &lt;li&gt;图9-3：1996，阿尔巴尼亚，AL 2516，笛卡尔&lt;/li&gt;
  &lt;li&gt;图9-4：1937，法国，FR 330，《方法谈》出版300年（书名印错，随后重新发行）&lt;/li&gt;
  &lt;li&gt;图9-5：1937，法国，FR 331，《方法谈》出版300年&lt;/li&gt;
  &lt;li&gt;图9-6：2000，塞拉利昂，SL 2254n，笛卡尔“我思故我在”&lt;/li&gt;
  &lt;li&gt;图9-7：2000，格林纳达，GD 2932k，笛卡尔逝世&lt;/li&gt;
  &lt;li&gt;图9-8：1961，罗马尼亚，RO 1443，弗兰西斯·培根&lt;/li&gt;
  &lt;li&gt;图9-9：2000，塞拉利昂，SL 2254d，弗兰西斯·培根&lt;/li&gt;
&lt;/ul&gt;</content><author><name>安道</name></author><category term="Stamps" /></entry><entry><title type="html">邮票上的物理学史（1-4）</title><link href="https://about.ac/2023/01/physics-stamps-one.html" rel="alternate" type="text/html" title="邮票上的物理学史（1-4）" /><published>2023-01-05T00:00:00+08:00</published><updated>2023-01-05T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2023-01-05-physics-stamps-one.md</id><content type="html" xml:base="https://about.ac/2023/01/physics-stamps-one.html">&lt;p&gt;按：最近在看《&lt;a href=&quot;https://book.douban.com/subject/1391033/&quot;&gt;邮票上的物理学史&lt;/a&gt;》（秦克诚，清华大学出版社），书中有大量邮票，大都有图示，也标注了发行年份和国家。但是，不便检索。遂决定找出每枚邮票的编号。过程中，发现书中给出的个别邮票信息有误，一道订正。&lt;/p&gt;

&lt;p&gt;注：如无特殊说明，邮票编号为 Scott 目录编号。&lt;/p&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;1. 希腊古典时期&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图1-1：1994，希腊，GR 1784，米利都的泰勒斯&lt;/li&gt;
  &lt;li&gt;图1-2：1961，罗马尼亚，RO 1442，赫拉克利特（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“1981”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图1-3：1988，法国，FR 2101～2104，四元素&lt;/li&gt;
  &lt;li&gt;图1-4：1966，列支敦士登，LI 406～409，保护环境（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“1994”错误，但是1994年确有一套 4 枚邮票主题为“四元素”，LI 1039～1042&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图1-5：1982，联合国，左：NT-NY 372，右：NT-WN 25，保护环境及四元素&lt;/li&gt;
  &lt;li&gt;图1-6：1972，瑞士，CH 554，保护环境及四元素&lt;/li&gt;
  &lt;li&gt;图1-7：1983，圣马力诺，SM 1045，毕达哥拉斯（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“1982”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图1-8：1955，希腊，GR 582～585，毕达哥拉斯&lt;/li&gt;
  &lt;li&gt;图1-9：1972，苏里南，SR B189，毕达哥拉斯定理&lt;/li&gt;
  &lt;li&gt;图1-10：1971，尼加拉瓜，NI C762，毕达哥拉斯定理&lt;/li&gt;
  &lt;li&gt;图1-11：1969，苏联，SU 3682，太空中的地球照片&lt;/li&gt;
  &lt;li&gt;图1-12：1983，希腊，GR 1469，德谟克利特&lt;/li&gt;
  &lt;li&gt;图1-13：1961，希腊，GR 716、717，德谟克利特原子核研究中心落成&lt;/li&gt;
  &lt;li&gt;图1-14：1956，希腊，GR RA91，亚里士多德&lt;/li&gt;
  &lt;li&gt;图1-15：1978，希腊，GR 1257~1260，亚里士多德逝世2300周年&lt;/li&gt;
  &lt;li&gt;图1-16：1986，梵蒂冈，VA 777、778，教廷科学院50周年&lt;/li&gt;
  &lt;li&gt;图1-17：2000，安哥拉，AO 1150b，最后的圣约&lt;/li&gt;
  &lt;li&gt;图1-18：1978，塞浦路斯，CY 505，亚里士多德&lt;/li&gt;
  &lt;li&gt;图1-19：1978，墨西哥，MX C579、C580，亚里士多德逝世2300周年&lt;/li&gt;
  &lt;li&gt;图1-20：1978，马里，ML 315，亚里士多德逝世2300周年&lt;/li&gt;
  &lt;li&gt;图1-21：1986，西班牙，ES 2491，亚里士多德&lt;/li&gt;
  &lt;li&gt;图1-22：1996，乌拉圭，UY 1628，亚里士多德&lt;/li&gt;
  &lt;li&gt;图1-24：1997，澳门，MO 902a、903，风水五行&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;2. 希腊化时期&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图2-1，1992，希腊，GR 1742，马其顿与亚里士多德&lt;/li&gt;
  &lt;li&gt;图2-2，1992，希腊，GR 1743，亚历山大大帝&lt;/li&gt;
  &lt;li&gt;图2-3，1988，马尔代夫，MV 1269，欧几里得&lt;/li&gt;
  &lt;li&gt;图2-4，1982，圣马力诺，SM 1021，阿基米德&lt;/li&gt;
  &lt;li&gt;图2-5，1983，希腊，GR 1460，浮力定律&lt;/li&gt;
  &lt;li&gt;图2-6，1983，意大利，IT 1559，螺旋泵&lt;/li&gt;
  &lt;li&gt;图2-7，1971，尼加拉瓜，NI C765，杠杆原理&lt;/li&gt;
  &lt;li&gt;图2-8，1963，西班牙，ES 1159，里贝拉画的阿基米德&lt;/li&gt;
  &lt;li&gt;图2-9，1973，东德，DD 1501，费蒂画的阿基米德&lt;/li&gt;
  &lt;li&gt;图2-10，1980，希腊，GR 1350、1351，阿里斯塔克诞生2300周年&lt;/li&gt;
  &lt;li&gt;图2-11，1965，希腊，GR 835，希帕克斯&lt;/li&gt;
  &lt;li&gt;图2-12，1969，也门，Michel YE-AR 903，天文学家托勒密&lt;/li&gt;
  &lt;li&gt;图2-13，1973，布隆迪，BI 433，托勒密的宇宙体系&lt;/li&gt;
  &lt;li&gt;图2-14，2000，中国，2000-20（6-5）J，墨子&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;3. 中世纪&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图3-1，1969，巴基斯坦，PK 281，伊本·海塞姆，“光学之父”&lt;/li&gt;
  &lt;li&gt;图3-2，1980，突尼斯，TN 763，比鲁尼&lt;/li&gt;
  &lt;li&gt;图3-3，1971，阿森松，AC 139，伊斯坦布尔的天文台&lt;/li&gt;
  &lt;li&gt;图3-4，1967，西班牙，ES 1461，伊本·拉希德&lt;/li&gt;
  &lt;li&gt;图3-5，1999，莱索托，Michel LS 1571，伊本·拉希德（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“2000”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图3-6，1953，中国，特7.4-1，司南·战国&lt;/li&gt;
  &lt;li&gt;图3-7，1999，多哥，TG 1887g，司南&lt;/li&gt;
  &lt;li&gt;图3-8，1999，海地，HT 918，罗盘（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“2000”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图3-9，1999，密克罗尼西亚，FM 355d，司南（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“2001”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图3-10，1962，中国，纪92.8-5，沈括&lt;/li&gt;
  &lt;li&gt;图3-11，1996，匈牙利，HU 3537，Panohalma修道院的图书馆&lt;/li&gt;
  &lt;li&gt;图3-12，1988，意大利，IT 1746，波洛尼亚大学&lt;/li&gt;
  &lt;li&gt;图3-13，2000，圭亚那，GY 3457，波洛尼亚大学&lt;/li&gt;
  &lt;li&gt;图3-14，1999，多米尼克，DM 2185f，萨拉曼加大学（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“2000”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图3-15，1957，西德，DE 766，弗莱堡大学500年&lt;/li&gt;
  &lt;li&gt;图3-16，1961，西德，DE 824，大阿尔伯特&lt;/li&gt;
  &lt;li&gt;图3-17，1961，西柏林，DE 9N176，大阿尔伯特&lt;/li&gt;
  &lt;li&gt;图3-18，1980，西德，DE 1328，大阿尔伯特&lt;/li&gt;
  &lt;li&gt;图3-19，1974，意大利，IT 1164，托马斯·阿奎那&lt;/li&gt;
  &lt;li&gt;图3-20，1974，西德，DE 1134，托马斯·阿奎那逝世700年&lt;/li&gt;
  &lt;li&gt;图3-21，2000，安提瓜和巴布达，AG 2385h，托马斯·阿奎那&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;文中还提到一些邮票，没有给出图示，下面列出。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;1971，卡塔尔，QA 235，伊本·海塞姆&lt;/li&gt;
  &lt;li&gt;1973，巴基斯坦，PK 357、358，比鲁尼&lt;/li&gt;
  &lt;li&gt;1998，突尼斯，TN 1171，伊本·拉希德&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong class=&quot;text-dracula-orange&quot;&gt;4. 文艺复兴和达·芬奇&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;图4-1，1999，英国，GB 1839，确立时间&lt;/li&gt;
  &lt;li&gt;图4-2，1992，德国，DE B734，回转塔钟&lt;/li&gt;
  &lt;li&gt;图4-3，1952，意大利，IT 601，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-4，1952，法国，FR 682，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-5，1969，阿尔巴尼亚，AL 1218，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-6，1938，意大利，IT 404，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-7，1952，波兰，PL B73，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-8，1996，古巴，CU 3716，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-9，1983，圣马力诺，SM 1046，达·芬奇设计的直升飞机（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“1982”错误&lt;/strong&gt;）&lt;/li&gt;
  &lt;li&gt;图4-10，1948，列支敦士登，LI C24，达·芬奇&lt;/li&gt;
  &lt;li&gt;图4-11，1969，阿尔巴尼亚，AL 1220，达·芬奇设计的直升飞机&lt;/li&gt;
  &lt;li&gt;图4-12，1977，圣马力诺，SM 908，达·芬奇设计的直升飞机&lt;/li&gt;
  &lt;li&gt;图4-13，2000，冈比亚，GM 2180a，达·芬奇设计的直升飞机&lt;/li&gt;
  &lt;li&gt;图4-14，1970，尼日尔，NE C126，达·芬奇设计的滑翔机&lt;/li&gt;
  &lt;li&gt;图4-15，1990，东德，DD 2800，达·芬奇设计的滑翔机&lt;/li&gt;
  &lt;li&gt;图4-16，1987，柬埔寨，KH 800，达·芬奇设计的滑翔机&lt;/li&gt;
  &lt;li&gt;图4-17，1992，柬埔寨，KH 1217，达·芬奇设计的滑翔机&lt;/li&gt;
  &lt;li&gt;图4-18，1966，厄瓜多尔，EC 757B，达·芬奇和开普勒&lt;/li&gt;
  &lt;li&gt;图4-19，2000，波兰，PL 3495，人体比例图（&lt;strong class=&quot;text-dracula-red&quot;&gt;书中发行年份“1999”错误&lt;/strong&gt;）&lt;/li&gt;
&lt;/ul&gt;</content><author><name>安道</name></author><category term="Stamps" /></entry><entry><title type="html">Asciidoc 转 Word 文档</title><link href="https://about.ac/2018/09/asciidoc-docx.html" rel="alternate" type="text/html" title="Asciidoc 转 Word 文档" /><published>2018-09-26T00:00:00+08:00</published><updated>2018-09-26T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2018-09-26-asciidoc-docx.md</id><content type="html" xml:base="https://about.ac/2018/09/asciidoc-docx.html">&lt;p&gt;在我的电子书制作过程中，&lt;a href=&quot;http://www.methods.co.nz/asciidoc/&quot;&gt;Asciidoc&lt;/a&gt; 是书写文稿的语言，由此生成三种格式的电子书：PDF，ePub 和 mobi。不过，出版社多数要求提供 .doc(x) 格式的文件，也就是 Word 文档。这时用 Asciidoc 就没那么方便了。&lt;/p&gt;

&lt;p&gt;但我还是喜欢用轻量级的纯文本书写语言，为此，之前我一直使用 Markdown，然后经由 &lt;a href=&quot;https://pandoc.org&quot;&gt;pandoc&lt;/a&gt; 生成 Word 文档。在这个过程中，要对生成的文档做些&lt;a href=&quot;{% post_url 2015-06-01-docx-hack-guide %}&quot;&gt;定制&lt;/a&gt;。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;           pandoc
Markdown ---------&amp;gt; Word
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;不过，Markdown 句法的语义没有 Asciidoc 丰富，不太适合用于撰写书稿。忍受 Markdown 一段时间之后，我还是回归到 Asciidoc 上了。这就遇到一个问题，怎么把 Asciidoc 文件转换成 Word 文档？&lt;/p&gt;

&lt;p&gt;前期，我采用的方法是先生成 PDF 文档，然后利用转换工具，把 PDF 文档转换成 Word 文档。这方面的软件很多，不过结果不太尽如人意，出版社的编辑经常抱怨格式混乱。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;           Prince        转换工具
Asciidoc ---------&amp;gt; PDF ---------&amp;gt; Word
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;抱怨多了，我却没有习惯，而是一直在寻找趁手的工具。在翻译《CSS: The Definitive Guide, 4th Edition》一书的过程中，偶遇了 &lt;a href=&quot;http://www.xmlmind.com/foconverter/&quot;&gt;XMLmind&lt;/a&gt; 这个工具。&lt;/p&gt;

&lt;p&gt;简单来说，XMLmind 能把 &lt;a href=&quot;https://www.w3.org/TR/2001/REC-xsl-20011015/&quot;&gt;XSL-FO&lt;/a&gt; 文件转换成一些常见的富文本格式：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;RTF（Word 2000+）&lt;/li&gt;
  &lt;li&gt;.doc 文档（Word 2003+）&lt;/li&gt;
  &lt;li&gt;.docx 文档（Word 2007+）&lt;/li&gt;
  &lt;li&gt;.odt 文档（OpenOffice）&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;它的主要优点是与 Prince 很像，都把样式表应用到纯文本文件上，生成相应格式的文档。Prince 生成的是 PDF 文档，XMLmind 生成的是 Word 文档；Prince 用的是 CSS 样式表，而 XMLmind 用的是在 FO 基础上定制的一种专用样式表。&lt;/p&gt;

&lt;p&gt;放在整个过程中看，使用 Prince 生成 PDF 文档时，介于 Asciidoc 和 PDF 之间的是 (X)HTML，而对 XMLmind 来说，位于中间的是 XSL-FO。虽然中间多了一步，但这也不失为一种可行的方式。&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;                            XMLmind
Asciidoc ---------&amp;gt; XSL-FO ---------&amp;gt; Word
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;当然，XMLmind 最大的问题在于它用的专用样式表：没有 CSS 那么强大。比如，没有继承和层叠。&lt;/p&gt;</content><author><name>安道</name></author><category term="Dev" /></entry><entry><title type="html">为 Heroku 应用添加 Let’s Encrypt SSL 证书</title><link href="https://about.ac/2017/01/letsencrypt.html" rel="alternate" type="text/html" title="为 Heroku 应用添加 Let's Encrypt SSL 证书" /><published>2017-01-04T00:00:00+08:00</published><updated>2017-01-04T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2017-01-04-letsencrypt.md</id><content type="html" xml:base="https://about.ac/2017/01/letsencrypt.html">&lt;div class=&quot;alert alert-info&quot;&gt;
&lt;p&gt;&lt;strong&gt;2017 年 4 月 4 日更新：&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Heroku 已经提供&lt;a href=&quot;https://devcenter.heroku.com/articles/automated-certificate-management&quot; title=&quot;Automated Certificate Management&quot;&gt;自动证书管理&lt;/a&gt;工具，能自动申请和续订 Let's Encrypt SSL 证书，无需再使用本文所述的方法自己动手操作。&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;按：经过一番折腾，终于为一个运行在 Heroku 中的 Rails 应用添加了 Let’s Encrypt SSL 证书。做个记录，备查。&lt;/p&gt;

&lt;p&gt;我有一个应用运行在 Heroku 中，为了兑现去年的承诺，元旦假期过后便着手为它添加 SSL 证书。首先想到的是 &lt;a href=&quot;https://letsencrypt.org/&quot;&gt;Let’s Encrypt&lt;/a&gt;，毕竟免费。&lt;/p&gt;

&lt;p&gt;在 Google 中搜索之后，找到了 &lt;a href=&quot;https://github.com/pixielabs/letsencrypt-rails-heroku&quot;&gt;letsencrypt-rails-heroku&lt;/a&gt; gem。看介绍，过程很简单，而且能自动重新签发。所以，我选定了它。&lt;/p&gt;

&lt;h3&gt;使用 letsencrypt-rails-heroku gem&lt;/h3&gt;

&lt;p&gt;首先，把 letsencrypt-rails-heroku gem 添加到 &lt;code class=&quot;highlighter-rouge&quot;&gt;Gemfile&lt;/code&gt; 中，然后 &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle install&lt;/code&gt;。按照说明添加 &lt;code class=&quot;highlighter-rouge&quot;&gt;Letsencrypt::Middleware&lt;/code&gt; 中间件，再配置几个环境变量。最后，把应用部署到 Heroku 中。&lt;/p&gt;

&lt;p&gt;至此，一切顺利。但是执行签发证书的命令时遇到了问题：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;heroku run rake letsencrypt:renew
Running rake letsencrypt:renew on ⬢ yourapp... ⣷ connecting, run.1234
Creating account key...Done!
Registering with LetsEncrypt...Done!
Setting config vars on Heroku...Done!
Giving config vars &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;to change...Done!
Testing filename works &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;to bring up app&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;...done!
Problem verifying challenge.
Status: pending, Error:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;执行这个命令很多遍，得到的结果都是一样，而且并没有详细的错误说明。接下来，我换用官方推荐的 &lt;a href=&quot;https://certbot.eff.org/&quot;&gt;certbot&lt;/a&gt;，试试行不行。&lt;/p&gt;

&lt;h3&gt;使用 certbot&lt;/h3&gt;

&lt;p&gt;首先，安装 certbot：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;certbot
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;然后手动签发：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ sudo certbot certonly --manual
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;根据提示输入电子邮件地址和域名，然后修改控制器，添加一个响应 GET &lt;code class=&quot;highlighter-rouge&quot;&gt;/.well-known/acme-challenge/:id&lt;/code&gt; URL 的动作，渲染纯文本。详情参见&lt;a href=&quot;http://collectiveidea.com/blog/archives/2016/01/12/lets-encrypt-with-a-rails-app-on-heroku&quot;&gt;这篇文章&lt;/a&gt;。&lt;/p&gt;

&lt;p&gt;但是验证阶段无法通过，提示 DNS A 记录查询失败。&lt;/p&gt;

&lt;p&gt;要知道，Heroku 中的应用绑定的是 CNAME 记录。正是这个错误消息误导了我，让我花了很多时间纠缠 CNAME 记录的问题。&lt;/p&gt;

&lt;p&gt;随后我又试了 dns 验证（之前是 http 验证），还是不行，提示 DNS 查询超时。&lt;/p&gt;

&lt;p&gt;这个工具不行，那就再换一个。我依稀记得有个工具叫 &lt;a href=&quot;https://github.com/Neilpang/acme.sh&quot;&gt;acme.sh&lt;/a&gt;。&lt;/p&gt;

&lt;h3&gt;使用 acme.sh&lt;/h3&gt;

&lt;p&gt;按照说明安装好 acme.sh 之后，我用 dns 验证试了一下：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;acme.sh &lt;span class=&quot;nt&quot;&gt;--issue&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--dns&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;按照提示设定一条 TXT 记录，等待一会之后（让 DNS 生效），执行：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;acme.sh &lt;span class=&quot;nt&quot;&gt;--renew&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; example.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;还是无法通过验证，日志中给出的消息是“Dns not added”。不过，在日志中，我看到有一个指向 Let’s Encrypt API 的 URL。打开一看，正是我的验证详情。&lt;/p&gt;

&lt;p&gt;至此，结合 certbot 给出的错误消息，我觉得可能是 DNS 有问题。经过一番搜索，我发现自己并不孤独，有很多人都遇到类似的问题，而且巧的是，部分人用的是 DNSPod，说换了其他 DNS 服务就好了。&lt;/p&gt;

&lt;h3&gt;更换 DNS&lt;/h3&gt;

&lt;p&gt;死马当活马医。我把域名的 DNS 从 DNSPod 换到了 he.net。等待一夜之后，新的记录仍未生效，导致网站无法访问。随后，我又从 he.net 换到了 NameCheap。不到半小时，记录就生效了。&lt;/p&gt;

&lt;h3&gt;回到 letsencrypt-rails-heroku gem&lt;/h3&gt;

&lt;p&gt;certbot 和 acme.sh 都是很方便的工具，但是 letsencrypt-rails-heroku gem 跟 Heroku 集成得更好。所以更换 DNS 之后，我首先尝试的，还是它。&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;heroku run rake letsencrypt:renew
Running rake letsencrypt:renew on ⬢ yourapp... up, run.8151
Creating account key...Done!
Registering with LetsEncrypt...Done!
Performing verification &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;cs.about.ac:
Setting config vars on Heroku...Done!
Giving config vars &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;to change...Done!
Testing filename works &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;to bring up app&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;...Done!
Giving LetsEncrypt some &lt;span class=&quot;nb&quot;&gt;time &lt;/span&gt;to verify...Done!

Adding new certificate...Done!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;一次成功！&lt;/p&gt;

&lt;p&gt;随后，添加&lt;a href=&quot;https://elements.heroku.com/addons/scheduler&quot;&gt;定时任务&lt;/a&gt;，每隔一段时间重新签发证书。&lt;/p&gt;

&lt;h3&gt;后续配置&lt;/h3&gt;

&lt;p&gt;证书签发好之后，要按照 Heroku 的说明，把自定义域名指向新的地址：&lt;code class=&quot;highlighter-rouge&quot;&gt;example.com.herokudns.com&lt;/code&gt;。&lt;/p&gt;

&lt;p&gt;还要配置 Rails 应用，在生产环境强制使用 SSL：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# config/environments/production.rb&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;force_ssl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果使用邮件程序，还要把协议修改成 &lt;code class=&quot;highlighter-rouge&quot;&gt;https&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# config/environments/production.rb&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;action_mailer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;default_url_options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;host: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'example.com'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;protocol: &lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'https'&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>安道</name></author><category term="Dev" /><category term="Rails" /></entry><entry><title type="html">规范专有名词的拼写</title><link href="https://about.ac/2016/07/normalize.html" rel="alternate" type="text/html" title="规范专有名词的拼写" /><published>2016-07-23T00:00:00+08:00</published><updated>2016-07-23T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2016-07-23-normalize.md</id><content type="html" xml:base="https://about.ac/2016/07/normalize.html">&lt;p&gt;最近看了一些书和网文，发现专有名词的拼写不太规范。我所说的“专有名词”是指一些网站、服务和程序的名字，如 GitHub、JavaScript、WordPress 等。这些名词经常错误地拼写成 Github、Javascript、Wordpress。&lt;/p&gt;

&lt;p&gt;之所以出现这样的问题，我想主要有两方面的原因。其一，不重视，觉得无所谓，有个字母大小写别人也知道说的是什么。其二，不小心拼错了。&lt;/p&gt;

&lt;p&gt;第一个原因属于态度上的问题，不管哪种拼法只要别人知道是什么就行。试想，如果别人使用同音字（毕竟中文没有大小写）写你的名字，你是什么感受。我就曾经因为这个问题和别人激烈争论过。&lt;/p&gt;

&lt;p&gt;第二个原因情有可原，谁人不犯错。但是，检查时要尽量发现这种低级错误。&lt;/p&gt;

&lt;p&gt;其实，我们可以利用某些输入法提供的功能避免这种低级错误。比如我使用的搜狗输入法（非利益相关）就有这样的功能。我设定了几个自定义短语，这样做可以避免不小心输入错误的大小写，还能简化输入，如果想输入 JavaScript，打出 js 再按空格键即可。不要轻视这个问题，小处见真章。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/figures/sougou.png&quot; alt=&quot;自定义短语&quot; /&gt;&lt;/p&gt;</content><author><name>安道</name></author><category term="Translation" /></entry><entry><title type="html">为 GitHub 设置 GPG 签名</title><link href="https://about.ac/2016/04/github-with-gpg-signature.html" rel="alternate" type="text/html" title="为 GitHub 设置 GPG 签名" /><published>2016-04-16T00:00:00+08:00</published><updated>2016-04-16T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2016-04-16-github-with-gpg-signature.md</id><content type="html" xml:base="https://about.ac/2016/04/github-with-gpg-signature.html">&lt;p&gt;GitHub 前几天支持 GPG 签名验证提交了（&lt;a href=&quot;https://github.com/blog/2144-gpg-signature-verification&quot; title=&quot;GPG signature verification&quot;&gt;via&lt;/a&gt;），今天对我的 GitHub 账户做了相应的设置，本文记录过程备考。&lt;/p&gt;

&lt;h3&gt;第 1 步：安装 GPG 命令行工具&lt;/h3&gt;

&lt;p&gt;使用 Homebrew 安装 GPG 命令行工具 gnupg：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;brew &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;gpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;第 2 步：生成 GPG 密钥&lt;/h3&gt;

&lt;p&gt;执行下述命令生成 GPG 密钥：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg &lt;span class=&quot;nt&quot;&gt;--gen-key&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在生成的过程中：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;询问密钥种类时按回车键，选择默认类型（RSA and RSA）；&lt;/li&gt;
  &lt;li&gt;询问密钥大小时，输入“4096”；&lt;/li&gt;
  &lt;li&gt;询问密钥有效期时按回车键，使用默认值，即永不过期；&lt;/li&gt;
  &lt;li&gt;输入“y”确认上述设置；&lt;/li&gt;
  &lt;li&gt;输入真实姓名和电子邮件地址，“Comment”可留空；&lt;/li&gt;
  &lt;li&gt;输入“O”确认；&lt;/li&gt;
  &lt;li&gt;输入保护私钥的密码；&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;以上信息设置完毕后，等待程序生成密钥。&lt;/p&gt;

&lt;h3&gt;第 3 步：添加 GPG 公钥&lt;/h3&gt;

&lt;p&gt;执行下述命令，查看可用的 GPG 密钥：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg &lt;span class=&quot;nt&quot;&gt;--list-keys&lt;/span&gt;
/Users/userA/.gnupg/pubring.gpg
&lt;span class=&quot;nt&quot;&gt;-------------------------------&lt;/span&gt;
pub   4096R/4A667092 2016-04-16
uid                  Your Name &amp;lt;your-name@gmail.com&amp;gt;
sub   4096R/48E027A6 2016-04-16
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中，&lt;code class=&quot;highlighter-rouge&quot;&gt;4A667092&lt;/code&gt; 是 GPG 密钥的 ID。&lt;/p&gt;

&lt;p&gt;执行下属命令，输出指定的 GPG 公钥：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;gpg &lt;span class=&quot;nt&quot;&gt;--armor&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--export&lt;/span&gt; &amp;lt;GPG-ID&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;把 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;GPG-ID&amp;gt;&lt;/code&gt; 替换成具体的 ID。在输出的内容中，从“—–BEGIN PGP PUBLIC KEY BLOCK—–”复制到“—–END PGP PUBLIC KEY BLOCK—–”。打开 &lt;a href=&quot;https://github.com/settings/keys&quot;&gt;GitHub 设置密钥的网页&lt;/a&gt;，粘贴 GPG 密钥。&lt;/p&gt;

&lt;h3&gt;第 4 步：设置 Git&lt;/h3&gt;

&lt;p&gt;最后要设置 Git，让 Git 使用指定的 GPG 密钥，并让 Git 在提交时使用 GPG 密钥签名。&lt;/p&gt;

&lt;p&gt;在 &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.gitconfig&lt;/code&gt; 文件中添加下述设置（如果集中管理 dotfiles，则在相应的文件中添加）：&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[user]
  ...
  signingkey = &amp;lt;GPG-ID&amp;gt;
...
[commit]
  gpgsign = true
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3&gt;第 5 步：签名提交&lt;/h3&gt;

&lt;p&gt;按照常规的方式提交，Git 会询问私钥的密码，输入即可。&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'&amp;lt;commit message&amp;gt;'&lt;/span&gt;

You need a passphrase to unlock the secret key &lt;span class=&quot;k&quot;&gt;for
&lt;/span&gt;user: &lt;span class=&quot;s2&quot;&gt;&quot;Your Name &amp;lt;your-name@gmail.com&amp;gt;&quot;&lt;/span&gt;
4096-bit RSA key, ID 4A667092, created 2016-04-16

...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content><author><name>安道</name></author><category term="Git" /></entry><entry><title type="html">Ruby on Rails 教程销售报告</title><link href="https://about.ac/2015/11/rails-tutorial-report.html" rel="alternate" type="text/html" title="Ruby on Rails 教程销售报告" /><published>2015-11-04T00:00:00+08:00</published><updated>2015-11-04T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2015-11-04-rails-tutorial-report.md</id><content type="html" xml:base="https://about.ac/2015/11/rails-tutorial-report.html">&lt;p&gt;&lt;strong&gt;按&lt;/strong&gt;：今天，《&lt;a href=&quot;http://railstutorial-china.org&quot;&gt;Ruby on Rails 教程&lt;/a&gt;》在线阅读开放了最后两章，至此，整本书都可以&lt;a href=&quot;http://railstutorial-china.org/book&quot;&gt;免费在线阅读&lt;/a&gt;。借此机会，总结一下这本书的销售情况。&lt;/p&gt;

&lt;p&gt;《Ruby on Rails 教程（原书第3版）》于 2014 年 10 上线销售电子书，至今已经过去了一年。下表是这一年各月的销售情况。&lt;/p&gt;

&lt;table class=&quot;table table-bordered text-center&quot;&gt;
    &lt;thead&gt;
        &lt;tr&gt;
            &lt;th class=&quot;text-center&quot; rowspan=&quot;2&quot;&gt;月份&lt;/th&gt;
            &lt;th class=&quot;text-center&quot; colspan=&quot;3&quot;&gt;销量&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;th class=&quot;text-center&quot;&gt;SelfStore&lt;/th&gt;
            &lt;th class=&quot;text-center&quot;&gt;Sellfy&lt;/th&gt;
            &lt;th class=&quot;text-center&quot;&gt;Leanpub&lt;/th&gt;
        &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
        &lt;tr&gt;&lt;td&gt;2014.10&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;17&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2014.11&lt;/td&gt;&lt;td&gt;66&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2014.12&lt;/td&gt;&lt;td&gt;77&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.01&lt;/td&gt;&lt;td&gt;55&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.02&lt;/td&gt;&lt;td&gt;45&lt;/td&gt;&lt;td&gt;9&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.03&lt;/td&gt;&lt;td&gt;41&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.04&lt;/td&gt;&lt;td&gt;48&lt;/td&gt;&lt;td&gt;7&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.05&lt;/td&gt;&lt;td&gt;46&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.06&lt;/td&gt;&lt;td&gt;31&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.07&lt;/td&gt;&lt;td&gt;31&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.08&lt;/td&gt;&lt;td&gt;33&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.09&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;3&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;/tr&gt;
        &lt;tr&gt;&lt;td&gt;2015.10&lt;/td&gt;&lt;td&gt;51&lt;/td&gt;&lt;td&gt;N/A&lt;/td&gt;&lt;td&gt;6&lt;/td&gt;&lt;/tr&gt;
    &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;在所有销量中，&lt;a href=&quot;https://selfstore.io/products/189&quot; title=&quot;到 SelfStore 购买 Ruby on Rails 教程&quot;&gt;SelfStore&lt;/a&gt; 的贡献最大，在此感谢 &lt;a href=&quot;http://chloerei.com/&quot;&gt;Rei&lt;/a&gt; 开发的这个网站。此外，本书还在 Sellfy（10 月换成了 &lt;a href=&quot;https://leanpub.com/rails-tutorial-cn&quot; title=&quot;到 Leanpub 购买 Ruby on Rails 教程&quot;&gt;Leanpub&lt;/a&gt;）销售电子书，主要面对说中文的海外用户。&lt;/p&gt;

&lt;p&gt;再次感谢所有购买本书的读者！&lt;/p&gt;</content><author><name>安道</name></author><category term="eBook" /></entry><entry><title type="html">ePub 电子书排版最佳实践</title><link href="https://about.ac/2015/09/epub-best-practices.html" rel="alternate" type="text/html" title="ePub 电子书排版最佳实践" /><published>2015-09-13T00:00:00+08:00</published><updated>2015-09-13T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2015-09-13-epub-best-practices.md</id><content type="html" xml:base="https://about.ac/2015/09/epub-best-practices.html">&lt;p&gt;在制作《&lt;a href=&quot;http://railstutorial-china.org&quot;&gt;Ruby on Rails 教程&lt;/a&gt;》和《&lt;a href=&quot;http://jekyll-china.com/book/&quot;&gt;Jekyll 小书&lt;/a&gt;》电子书的过程中，积累了一些经验，班门弄斧，姑且称之为“最佳实践”吧。&lt;/p&gt;

&lt;h2&gt;没有“页”这个概念&lt;/h2&gt;

&lt;p&gt;这是大前提，制作 ePub 电子书时一定要谨记这一点。ePub 电子书是“流式”的，不像实体书和 PDF 电子书那样有“页”这个概念。因此，很多效果或功能在 ePub 电子书中实现不了，比如说页眉和页码等（ePub 阅读器通常会在屏幕上部实现“页眉”，显示当前查看的书名和章节名；而且也会“分页”，但对阅读器来说，这个页与实体书的页并不一样）。&lt;/p&gt;

&lt;p&gt;因为没有页码，书中的交叉引用不能简单地使用“参见 XX 页”，而要链接到章节名或章节序号。&lt;/p&gt;

&lt;h2&gt;ePub 文件是小型的静态网站&lt;/h2&gt;

&lt;p&gt;这也是一个核心概念。你可以把 ePub 电子书的扩展名改为 &lt;code class=&quot;highlighter-rouge&quot;&gt;.zip&lt;/code&gt;，然后解压。你会看到解压得到的基本上就是个简单的静态网站：有 XHTML 文件，有图像，有样式表。如下所示：&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;├── META-INF/
├── OEBPS
│   ├── chapter1.xhtml
│   ├── chapter2.xhtml
│   ├── chapter3.xhtml
│   ├── cover.jpg
│   ├── epub.css
│   ├── images/
│   ├── package.opf
│   └── toc.ncx
└── mimetype
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;当然，这个网站与我们平常所说的网站有所不同，这是由 Web 浏览器与 ePub 阅读器之间的功能差异造成的。例如，在 ePub 电子书中基本不能使用 JavaScript，对 SVG 的支持有限，只能使用部分 CSS 属性。不过，ePub 电子书可以嵌入字体。&lt;/p&gt;

&lt;h2&gt;交叉引用&lt;/h2&gt;

&lt;p&gt;交叉引用是指引用书内的某个部分，比如“参见 1.2.3 节”，“如图 2.7”，等等。交叉引用最好加上链接，因为电子书不像实体书那样可以来回翻阅，加入链接便于读者定位所引用的内容。&lt;/p&gt;

&lt;h2&gt;提供目录&lt;/h2&gt;

&lt;p&gt;ePub 阅读器一般都会使用特殊的交互方式显示目录，但不会自己去解析内容，再生成目录。所以我们要在 ePub 文件中加入目录，让阅读器读取。如果内容较多，想显示次级目录，比如“3.2 节”，一定要设定目录的层级，不要把所有目录都放在相同的层级。指定目录层级的方式是，在 &lt;code class=&quot;highlighter-rouge&quot;&gt;navPoint&lt;/code&gt; 元素中嵌套 &lt;code class=&quot;highlighter-rouge&quot;&gt;navPoint&lt;/code&gt; 元素，如下所示：&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;navMap&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;navPoint&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ch1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;navLabel&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;text&amp;gt;&lt;/span&gt;第 1 章&lt;span class=&quot;nt&quot;&gt;&amp;lt;/text&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/navLabel&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;content&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ch1.html#ch_1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;navPoint&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;class=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;h2&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ch_1_1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;navLabel&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;text&amp;gt;&lt;/span&gt;1.1 节&lt;span class=&quot;nt&quot;&gt;&amp;lt;/text&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;/navLabel&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;content&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ch1.html#ch_1_1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/navPoint&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/navPoint&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;navPoint&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ch2&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;navLabel&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;text&amp;gt;&lt;/span&gt;第 2 章&lt;span class=&quot;nt&quot;&gt;&amp;lt;/text&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/navLabel&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;content&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ch2.html#ch_2&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/navPoint&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/navMap&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;不要把整本书都放在一个 XHTML 文件里&lt;/h2&gt;

&lt;p&gt;一本书的内容有长有短，但是，不管多长，建议一章放在一个 XHTML 文件里，不要把整本书都放在一个 XHTML 文件里。如果都放在一个文件里，ePub 阅读器解析的速度会变慢。&lt;/p&gt;

&lt;h2&gt;重置默认样式&lt;/h2&gt;

&lt;p&gt;ePub 阅读器就像 Web 浏览器一样，会内置默认的样式。为了更好的掌控，实现较为统一的视觉效果，建议在样式表开头重置样式。比如说：&lt;/p&gt;

&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;html&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;body&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;span&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;applet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;iframe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;blockquote&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;pre&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;abbr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;acronym&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;big&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;cite&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;code&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;del&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;dfn&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;em&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;font&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;img&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;ins&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;kbd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;samp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;small&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;strike&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;sub&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;sup&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;tt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;u&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;center&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;dl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;dt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;dd&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;ol&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;ul&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;li&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;fieldset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;form&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;label&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;legend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;caption&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;tbody&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;tfoot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;thead&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;tr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;th&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;margin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;outline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;100%&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;vertical-align&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;baseline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nl&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;transparent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;按章“换页”&lt;/h2&gt;

&lt;p&gt;ePub 电子书虽然没有“页”这个概念，却可以换页（严格来说应该是“换屏”）。从视觉上来看，换页就是新起一屏显示内容，让相对独立的内容（例如两章）不连在一起。一般来说，建议每章结束后换页，使用下述 CSS 代码实现：&lt;/p&gt;

&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;.chapter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;page-break-after&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;always&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;字体&lt;/h2&gt;

&lt;p&gt;ePub 阅读器底层的操作系统（例如 iOS，Android 和各种定制的 ROM）往往会提供不同的字体，因此不能期望读者的系统中一定有某个字体。设置字体时要指定通用字体族（&lt;code class=&quot;highlighter-rouge&quot;&gt;serif&lt;/code&gt;，&lt;code class=&quot;highlighter-rouge&quot;&gt;sans-serif&lt;/code&gt; 或 &lt;code class=&quot;highlighter-rouge&quot;&gt;monospace&lt;/code&gt;），让阅读器或底层系统判断要使用哪个字体。当然，我们也可以指定各种系统中常用的字体，提供更好的阅读体验。&lt;/p&gt;

&lt;p&gt;如果十分想保持一致的阅读体验，还可以使用 &lt;code class=&quot;highlighter-rouge&quot;&gt;@font-face&lt;/code&gt; 嵌入字体。但是要考虑嵌入的字体会不会让电子书的体积变得特别大，影响传输速度。&lt;/p&gt;

&lt;p&gt;如果指定了字体，而不是让阅读器自行判断该使用哪个字体，在 iBooks 中会遇到一个问题：没使用指定的字体。这个问题的解决方法是，在 &lt;code class=&quot;highlighter-rouge&quot;&gt;.opf&lt;/code&gt; 文件中加入下述元素：&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ibooks:specified-fonts&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/meta&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;添加这个属性后，你会发现，在 iBooks 的外观设置中，字体项目下多了一个“Original”。这个选项的意思是，使用电子书中指定的字体。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/figures/ibooks-fonts.png&quot; alt=&quot;让 iBooks 使用指定的字体&quot; /&gt;&lt;/p&gt;

&lt;h2&gt;字号&lt;/h2&gt;

&lt;p&gt;我想你一定有这样的经历——调整电子书的文字大小。这种情况经常出现，因此，不要使用固定字号，例如 &lt;code class=&quot;highlighter-rouge&quot;&gt;12px&lt;/code&gt;，而要使用便于缩放的字号单位。ePub 电子书的字号一般建议使用百分比为单位，比如 &lt;code class=&quot;highlighter-rouge&quot;&gt;80%&lt;/code&gt;。&lt;/p&gt;

&lt;h2&gt;为标题加序号&lt;/h2&gt;

&lt;p&gt;书中的各级标题往往使用不同于正文的字体和字号显示，但是在手持设备中，字号之间的差异并不明显。为了让读者对一本书的纲要有全局的认识，建议在标题前加上序号，例如：“1.2 二级标题”，“1.2.3 三级标题”。&lt;/p&gt;

&lt;h2&gt;考虑兼容性&lt;/h2&gt;

&lt;p&gt;是的，与浏览器一样，我们也要考虑 ePub 阅读器的兼容性。就我目前的观察，iBooks 对标准的支持是最好的。但我们不能期望所有读者都使用 iOS/OS X 系统。下面举个例子。&lt;/p&gt;

&lt;p&gt;我平常看书喜欢用多看（手机和平板），但是&lt;a href=&quot;{% post_url 2014-06-22-duokan-xhtml-entities %}&quot;&gt;多看对 XHTML 实体的支持并不好&lt;/a&gt;，有些特殊的符号显示不出来。这时就要专门针对多看编写样式：&lt;/p&gt;

&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;.symbol&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;'DK-SYMBOL'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;DK-SYMBOL&lt;/code&gt; 是多看自带的字体，用于显示一些特殊的字体。&lt;/p&gt;

&lt;h2&gt;其他&lt;/h2&gt;

&lt;p&gt;除了上面列出的几点之外，还有一些推荐的做法，在此不一一展开详述。&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;不要定义大块背景色；&lt;/li&gt;
  &lt;li&gt;脚注加上返回链接；&lt;/li&gt;
  &lt;li&gt;尽量不使用某个阅读器专属的功能；&lt;/li&gt;
&lt;/ul&gt;</content><author><name>安道</name></author><category term="eBook" /></entry><entry><title type="html">在电子书中渲染公式</title><link href="https://about.ac/2015/08/stem.html" rel="alternate" type="text/html" title="在电子书中渲染公式" /><published>2015-08-14T00:00:00+08:00</published><updated>2015-08-14T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2015-08-14-stem.md</id><content type="html" xml:base="https://about.ac/2015/08/stem.html">&lt;p&gt;昨天更新了《&lt;a href=&quot;http://railstutorial-china.org&quot;&gt;Ruby on Rails 教程&lt;/a&gt;》，这次更新最大的变化是对公式的处理方式。这本书有一节用了几个公式，我使用的电子书工具链之前不支持转换公式，所以只能做些简单的处理：使用上下标。后来越看越不舒服，因此前几天抽空实现了 LaTex 式的显示效果。&lt;/p&gt;

&lt;p&gt;公式一直是我的电子书工具链所缺乏的功能之一，我也一直想解决，不过苦于没有合适的方法。前几天，O’Reilly 电子书方面的负责人（Sanders Kleinfeld）分享了&lt;a href=&quot;http://diagramcenter.org/webinars.html#mmlc&quot;&gt;他们的处理方式&lt;/a&gt;，勾起了我解决这个问题的欲望。&lt;/p&gt;

&lt;p&gt;按照 Sanders 的分享，我首先尝试使用 &lt;a href=&quot;https://www.mathmlcloud.org/&quot;&gt;MathML Cloud&lt;/a&gt;。不过这个服务提供的 API 不规范，尝试过程中多次遇到问题。这个服务的实现方式是&lt;a href=&quot;https://github.com/benetech/mmlc-api&quot;&gt;开源&lt;/a&gt;的，不过自己搭建很麻烦，又是 MongoDB，又是 Redis 的，所以我放弃了这个方案。&lt;/p&gt;

&lt;p&gt;随后我试着搜索，看有没有纯 Ruby 的解决方案，毕竟我的工具链是使用 Ruby 编写的。在 GitHub 中搜索，找到了 &lt;a href=&quot;https://github.com/gjtorikian/mathematical&quot;&gt;mathematical&lt;/a&gt;。这个 gem 为了提升“速度”，用了两个 C 语言扩展。正是这两个扩展让我放弃使用这个 gem。因为用到了 C 扩展，所以安装之前要先安装一些库，不过对于“新手”来说，这个过程像念咒语一样，根本不得要领，开发者说安装什么跟着做就是了，然而有时跟着做也没用。环境的差异害死人！在这个 gem 开发者的帮助下，成功编译了 C 扩展，可是使用过程中又遇到了问题：无法生成 SVG 和 png 图像。自己尝试解决无果后，我就放弃了这个 gem。&lt;/p&gt;

&lt;p&gt;这时，我又想起了 MathML Cloud，既然这个服务的实现方式是开源的，不妨看看它是如何渲染公式的。看了&lt;a href=&quot;https://github.com/benetech/mmlc-api/blob/1daa756cc68a2ab5b535410b3f968c9257e2400c/package.json#L26&quot;&gt;代码&lt;/a&gt;，发现 MathML Cloud 使用的是 &lt;a href=&quot;https://github.com/mathjax/MathJax-node&quot;&gt;MathJax-node&lt;/a&gt;。&lt;a href=&quot;https://www.mathjax.org/&quot;&gt;MathJax&lt;/a&gt; 应该是目前最成熟的公式解决方案，既然有 Node.js 版，集成到我的工具链中就不难了，因为 MathJax-node 提供了 CLI。经过一番编程之后，最终顺利把 MathJax-node 集成到我的工具链中。&lt;/p&gt;

&lt;p&gt;目前我是这样处理公式的：书稿中使用 LaTex 句法写公式（纯文本，便于管理），生成电子书时为不同的电子书格式生成不同格式的图像&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;PDF 和 HTML 格式用 SVG&lt;/li&gt;
  &lt;li&gt;ePub 和 mobi 格式用 png&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;这么做遵循了“渐进增强”原则，因为 PDF 骨子里就是“矢量”的，最适合使用 SVG，而且目前大多数主流浏览器都支持 SVG，所以 HTML 格式也用了 SVG。但是 ePub 阅读器和 Kindle 等对 SVG 的支持并不好，只能使用图像；虽然缩放时的体验不好，但是至少还能辨识公式的内容。&lt;/p&gt;

&lt;p&gt;P.S. 我的电子书工具链是 &lt;a href=&quot;https://rubygems.org/gems/persie&quot;&gt;persie&lt;/a&gt;。这个工具之前是开源的，现在已经闭源，不过以前的版本仍然可以下载安装。&lt;/p&gt;</content><author><name>安道</name></author><category term="eBook" /></entry><entry><title type="html">docx 文件脚注的编号</title><link href="https://about.ac/2015/08/docx-footnotes-numbering.html" rel="alternate" type="text/html" title="docx 文件脚注的编号" /><published>2015-08-03T00:00:00+08:00</published><updated>2015-08-03T00:00:00+08:00</updated><id>repo://posts.collection/_posts/2015-08-03-docx-footnotes-numbering.md</id><content type="html" xml:base="https://about.ac/2015/08/docx-footnotes-numbering.html">&lt;p&gt;最近，使用 &lt;a href=&quot;http://pandoc.org/&quot;&gt;pandoc&lt;/a&gt; 生成 docx 文件遇到一个问题。默认情况下，一个文档中的所有脚注是按顺序标号的。这其实没什么问题，因为“语义”上讲，这就是正确的编号方法。但是，我想实现的是“按章”编号。&lt;/p&gt;

&lt;p&gt;我之前已经从样式上区别了各章（方法参见《&lt;a href=&quot;{% post_url 2015-06-01-docx-hack-guide %}&quot;&gt;docx 文件定制指南&lt;/a&gt;》），即在一级标题之前换页。这只是“表面功夫”，Word 看到的仍是一个没有结构划分的文档。为了实现脚注按章编号，首先要想办法让 Word 知道每一章在哪里开始，在哪里结束，也就是从“语义”上实现分章。&lt;/p&gt;

&lt;p&gt;其实 Word 提供了这种功能——分节。不过在代码层级，实现起来有点复杂。根据 WordProcessingML 的定义，文档最后一节的相关属性在 &lt;code class=&quot;highlighter-rouge&quot;&gt;w:body&lt;/code&gt; 元素中最后一个 &lt;code class=&quot;highlighter-rouge&quot;&gt;w:sectPr&lt;/code&gt; 元素中定义，而之前每一节的相关属性都在各节最后一个段落（&lt;code class=&quot;highlighter-rouge&quot;&gt;w:p&lt;/code&gt;）的属性中定义，如下述代码所示：&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;w:body&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!--第一节--&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:pPr&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:sectPr&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:sectPr&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:pPr&amp;gt;&lt;/span&gt;
        ...
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;&amp;lt;!--第二节--&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:pPr&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:sectPr&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:sectPr&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:pPr&amp;gt;&lt;/span&gt;
        ...
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;&amp;lt;!--最后一节--&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:p&amp;gt;&lt;/span&gt;...&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:p&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:sectPr&amp;gt;&lt;/span&gt;
        ...
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:sectPr&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:body&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;pandoc 所用的模板没有为最后一节指定任何属性，即只有 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;w:sectPr/&amp;gt;&lt;/code&gt;。所以，要想办法设置最后一节的属性，还要在每个一级标题之前的段落属性里插入 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;w:sectPr&amp;gt;&lt;/code&gt; 元素。这个好办，使用相关的 XML 处理库就行。如果使用 Ruby，可以用 &lt;a href=&quot;https://rubygems.org/gems/nokogiri&quot;&gt;nokogiri&lt;/a&gt;。XML 的具体处理方法本文不再赘述。&lt;/p&gt;

&lt;p&gt;不过，要如何设置每一节的属性才能让脚注按章编号呢？按照 WordProcessingML 的定义，脚注的属性放在 &lt;code class=&quot;highlighter-rouge&quot;&gt;w:footnotePr&lt;/code&gt; 元素中，控制编号方式的是 &lt;code class=&quot;highlighter-rouge&quot;&gt;w:numRestart&lt;/code&gt; 元素。这个元素的值可以设为下述三个值中的一个：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;continuous&lt;/code&gt;（默认值）&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;eachSect&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;eachPage&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;从上可以看出，我们需要把这个元素的值设为 &lt;code class=&quot;highlighter-rouge&quot;&gt;eachSect&lt;/code&gt;，即开始新的一节时重新从头开始为脚注编号。最终设置的 &lt;code class=&quot;highlighter-rouge&quot;&gt;w:sectPr&lt;/code&gt; 如下：&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;w:sectPr&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:footnotePr&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;w:numRestart&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;w:val=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;eachSect&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:footnotePr&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/w:sectPr&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果想每页单独编号，可以把 &lt;code class=&quot;highlighter-rouge&quot;&gt;w:numRestart&lt;/code&gt; 的值设为 &lt;code class=&quot;highlighter-rouge&quot;&gt;eachPage&lt;/code&gt;。&lt;/p&gt;</content><author><name>安道</name></author><category term="Dev" /></entry></feed>